<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Friend Finder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/solid.css" integrity="sha384-+0VIRx+yz1WBcCTXBkVQYIBVNEFH1eP6Zknm16roZCyeNg2maWEpk/l/KsyFKs7G"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/fontawesome.css" integrity="sha384-jLuaxTTBR42U2qJ/pm4JRouHkEDHkVqH0T1nyQXn1mZ7Snycpf6Rl25VBNthU4z0"
        crossorigin="anonymous">
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
    <div class="container bg-light p-3">
        <h1 class="text-center display-5">Survey Questions</h1>
        <hr />
        <h2 class="h4">About You</h2>

        <div class="form-group">
            <label for="name">Name (required)</label>
            <input type="text" class="form-control" id="name" required="required">
        </div>
        <div class="form-group">
            <label for="photo">Link to Photo Image (required)</label>
            <input type="text" class="form-control" id="photo" required="required">
        </div>
        <hr />
        <div class="form-group">
            <p class="h5">Question 1</p>
            <label for="q1">You like to check your horoscope.</label>
            <select class="form-control col-md-4" id="q1">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <p class="h5">Question 2</p>
            <label for="q2">You consider yourself a "foodie."</label>
            <select class="form-control col-md-4" id="q2">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <p class="h5">Question 3</p>
            <label for="q3">Traveling is fun.</label>
            <select class="form-control col-md-4" id="q3">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <p class="h5">Question 4</p>
            <label for="q4">You like going to parties.</label>
            <select class="form-control col-md-4" id="q4">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <p class="h5">Question 5</p>
            <label for="q5">Your mind is always buzzing with unexplored ideas and plans.</label>
            <select class="form-control col-md-4" id="q5">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <p class="h5">Question 6</p>
            <label for="q6">You daydream a lot.</label>
            <select class="form-control col-md-4" id="q6">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <p class="h5">Question 7</p>
            <label for="q7">You are afraid of death.</label>
            <select class="form-control col-md-4" id="q7">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <p class="h5">Question 8</p>
            <label for="q8">You spend a lot of time playing video games.</label>
            <select class="form-control col-md-4" id="q8">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <p class="h5">Question 9</p>
            <label for="q9">You spend too much time on your phone.</label>
            <select class="form-control col-md-4" id="q9">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <p class="h5">Question 10</p>
            <label for="q10">You work out often.</label>
            <select class="form-control col-md-4" id="q10">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <button type="submit" class="btn btn-secondary btn-lg btn-block pb-2" id="submit"><i class="fa fa-check-circle"></i>
            Submit</button>
    </div>

    <footer class="footer">
        <div class="container">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/cxlhyphen/FriendFinder">Github
                    Page</a></p>
        </div>
    </footer>

    <script>

        //On click, validate it, and capture input
        $("#submit").on("click", () => {

            event.preventDefault();

            function validateForm() {
                let isValid = true;
                $(".form-control").each(() => {
                    if ($(this).val() === "") {
                        isValid = false;
                    }
                });
                
                return isValid;
            }

            if (validateForm()) {
                // Create an object for the user"s data
                var userData = {
                    name: $("#name").val(),
                    photo: $("#photo").val(),
                    scores: [
                        $("#q1").val(),
                        $("#q2").val(),
                        $("#q3").val(),
                        $("#q4").val(),
                        $("#q5").val(),
                        $("#q6").val(),
                        $("#q7").val(),
                        $("#q8").val(),
                        $("#q9").val(),
                        $("#q10").val()
                    ]
                };

                // AJAX post the data to the friends API.
                $.post("/api/friends", userData, function (data) {

                    // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                    $("#match-name").text(data.name);
                    $("#match-img").attr("src", data.photo);

                    // Show the modal with the best match
                    $("#results-modal").modal("toggle");

                });
            } else {
                alert("Please fill out all fields before submitting!");
            }
        });

    </script>
</body>

</html>